<page
  *ngIf="permissions && userPermissions"
  theme="inside"
  [breadcrumbs]="crumbs"
  section="Workspace"
  title="Regional Assistance Locations">

  <sidebar>
    <!-- Navigation -->
    <ul class="usa-sidenav-list">
      <li>
        <a routerLink="/fal/workspace">
          Assistance Listings
        </a>
      </li>
      <li>
        <a class="usa-current">
          Regional Assistance Locations
        </a>
      </li>
      <li>
        <a *ngIf="permissions.ORG_LEVELS?.level && permissions.ORG_LEVELS?.level === 'all'" routerLink="/fal/workspace/cfda-numbers">
          CFDA Number Assignment
        </a>
      </li>
    </ul>

    <!-- Filters -->
    <div class="sam-ui segment">
      <h4 class="sam-ui header">Search</h4>
      <div *ngIf="raoExists && !initLoad" class="search-bar">
        <sam-autocomplete class="div-fill"#autocomplete
                          [(ngModel)]="keyword"
                          (ngModelChange)="regionalLocationSearchModel($event)"
                          (enterEvent)="regionalLocationSearchClick()"
                          [config]="regionalLocationSearchConfig"
                          [options]="[]"
                          [allowAny]="true"
                          name="appsearch">
        </sam-autocomplete>
        <sam-button class="div-right"
                    [buttonType]="'default'"
                    [buttonText]="'Search' "
                    [buttonClass]="'usa-button usa-search-submit search-btn'"
                    (onClick)="regionalLocationSearchClick()">
        </sam-button>
      </div>
    </div>
  </sidebar>

  <sam-button *ngIf="userPermissions && userPermissions._links && this.userPermissions._links['program:regional:offices:create']"
              [attr.id] = "'create-new-btn'"
              [buttonType]="'default'"
              [buttonText]="'Add Location' "
              [buttonClass]="'sam-ui button dark blue'"
              (onClick)="createNewLocation()">
  </sam-button>

  <p *ngIf="userPermissions && userPermissions._links && this.userPermissions._links['program:regional:offices:create'] && !raoExists && !initLoad">
    There are no Regional Agency Offices associated with user's department
  </p>

  <!-- Page results -->
  <results
    [totalElements]="totalCount"
    [totalPages]="totalPages"
    [currentPage]="pageNum+1"
    (pageChange)="pageChange($event-1)">

    <!-- Results -->
    <div class="sam-ui segment" *ngFor="let row of data">
      <regional-assistance-location-result
        [data]="row"
        [qParams]="qParams"
        [permissions]="permissions"
        (recordDeleted)="getRegionalAssistanceLocations()">
      </regional-assistance-location-result>
    </div>

    <!-- No results -->
    <p *ngIf="oldKeyword!='' && data.length===0 && !initLoad">
      No results found for '<strong>{{ oldKeyword }}</strong>'
    </p>
  </results>

</page>
