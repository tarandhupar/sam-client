<!--Delete Modal-->
<sam-modal *ngIf="config.deleteModal" #deleteModal
          [showClose]="true"
          [closeOnOutsideClick]="true"
          [closeOnEscape]="true"
          [type]="'warning'"
          [title]="config.deleteModal.title"
          [description]="config.deleteModal.description"
          [submitButtonLabel]="'Ok'"
          [cancelButtonLabel]="'Cancel'"
          (onSubmit)="onDeleteModalSubmit($event)">
</sam-modal>

<sam-label-wrapper #fyTableWrapper
              [name]="config.name"
              [label]="config.label"
              [hint]="config.hint"
              [required]="config.required">

  <sam-checkbox [name]="config.name + '-checkbox'"
                [options]="checkboxOptions"
                [formControl]="checkboxControl"
  ></sam-checkbox>

  <div *ngIf="fyTableGroup" [formGroup]="fyTableGroup">
    <div [hidden]="!model.isApplicable">
      <table class="sam-ui table celled lightest blue" *ngIf="model.entries && containsDisplayedEntries()">
        <thead>
        <tr>
          <th scope="col" id="fiscal-year">
            Fiscal Year
          </th>
          <th scope="col" id="examples">
            {{ config.itemName }}
          </th>
          <th scope="col" id="actions">
            Actions
          </th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let entry of model.entries; let i=index">
          <tr *ngIf="entry.year === null || (entry.year >= getCurrentFY() - 1 && entry.year <= getCurrentFY() + 1)">
            <td>
              {{ entry.year }}
              <span *ngIf="!entry.year" [class]="'usa-input-error-message'">Fiscal year is required</span>
            </td>
            <td>
              {{ entry.description }}
              <span *ngIf="!entry.description" [class]="'usa-input-error-message'">{{ config.itemName }} is required</span>
            </td>
            <td>
              <ng-container *ngIf="!isEditing">
                <a class="fal-table-edit" (click)="editEntry(i)">
                  Edit
                  <em class="fa fa-pencil fal-table-edit" aria-hidden="true" (click)="editEntry(i)"></em>
                </a>

                <a class="fal-table-delete" (click)="onDeleteClick(i)">
                  Delete
                  <em class="fa fa-times fal-table-delete" aria-hidden="true" (click)="onDeleteClick(i)"></em>
                </a>
              </ng-container>
              <ng-container *ngIf="isEditing">
                <span class="fal-table-edit disabled">Edit</span>
                <em class="fa fa-pencil fal-table-edit disabled" aria-hidden="true"></em>
                <span class="fal-table-delete disabled">Delete</span>
                <em class="fa fa-times fal-table-delete disabled" aria-hidden="true"></em>
              </ng-container>
            </td>
          </tr>
        </ng-container>
        </tbody>
      </table>

      <sam-select *ngIf="isEditing"
                  [label]="'Select a Year'"
                  [name]="config.name + '-year-select'"
                  [required]="config.select?.required || false"
                  [options]="yearOptions"
                  [formControlName]="'year'"
                  [control]="fyTableGroup.get('year')"
      ></sam-select>

      <sam-text-area *ngIf="isEditing"
                     [label]="config.entry?.hint"
                     [name]="config.name + '-textarea'"
                     [required]="config.textarea?.required || false"
                     [formControlName]="'textarea'"
                     [control]="fyTableGroup.get('textarea')"
      ></sam-text-area>

      <sam-button [buttonId]="'fiscal-year-add-btn'" *ngIf="!isEditing && yearOptions && yearOptions.length > 0" [buttonText]="'Add ' + config.itemName" (onClick)="displayForm()" [buttonType]="'secondary'"></sam-button>
      <sam-button [buttonId]="'fiscal-year-cancel-btn'" *ngIf="isEditing" [buttonText]="cancelBtnText" (onClick)="resetForm()" [buttonType]="'tertiary'"></sam-button>
      <sam-button [buttonId]="'fiscal-year-confirm-btn'" *ngIf="isEditing" [buttonText]="confirmBtnText" (onClick)="addEntry()" [buttonType]="'secondary'"></sam-button>
    </div>
  </div>

</sam-label-wrapper>
