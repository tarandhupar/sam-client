<!--Delete Modal-->
<sam-modal *ngIf="config.deleteModal" #deleteModal
          [showClose]="true"
          [closeOnOutsideClick]="true"
          [closeOnEscape]="true"
          [type]="'warning'"
          [title]="config.deleteModal.title"
          [description]="config.deleteModal.description"
          [submitButtonLabel]="'Ok'"
          [cancelButtonLabel]="'Cancel'"
          (onSubmit)="onDeleteModalSubmit($event)">
</sam-modal>

<sam-label-wrapper #fyTableWrapper
              [name]="config.name"
              [label]="config.label"
              [hint]="config.hint"
              [required]="config.required">

  <div *ngIf="fyTableGroup" [formGroup]="fyTableGroup">
    <sam-checkbox [name]="config.name + '-checkbox'"
                 [options]="checkboxOptions"
                 [formControlName]="'naCheckbox'"
    ></sam-checkbox>

    <div [hidden]="!model.isApplicable">
      <table class="sam-ui table celled" *ngIf="model.entries && model.entries.length > 0">
        <thead>
        <tr>
          <th scope="col">
            Fiscal Year
          </th>
          <th scope="col">
            {{ config.itemName }}
          </th>
          <th scope="col">
            Actions
          </th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let entry of model.entries; let i=index">
          <tr *ngIf="entry.year == null || entry.year >= getCurrentFY() - 1 && entry.year <= getCurrentFY() + 1">
            <td>{{ entry.year }}</td>
            <td>{{ entry.description }}</td>
            <td>
              <ng-container *ngIf="!isEditing">
                <a class="fal-table-edit" (click)="editEntry(i)">Edit</a>
                <i class="fa fa-pencil fal-table-edit" aria-hidden="true" (click)="editEntry(i)"></i>
                <a class="fal-table-delete" (click)="onDeleteClick(i)">Remove</a>
                <i class="fa fa-trash fal-table-delete" aria-hidden="true" (click)="onDeleteClick(i)"></i>
              </ng-container>
              <ng-container *ngIf="isEditing">
                <span class="fal-table-edit disabled">Edit</span>
                <i class="fa fa-pencil fal-table-edit disabled" aria-hidden="true"></i>
                <span class="fal-table-delete disabled">Remove</span>
                <i class="fa fa-trash fal-table-delete disabled" aria-hidden="true"></i>
              </ng-container>
            </td>
          </tr>
        </ng-container>
        </tbody>
      </table>

      <sam-select *ngIf="isEditing"
                 [hint]="'Select a Year'"
                 [name]="config.name + '-year-select'"
                 [required]="false"
                 [options]="yearOptions"
                 [formControlName]="'year'"
      ></sam-select>

      <sam-text-area *ngIf="isEditing"
                   [hint]="config.entry?.hint"
                   [name]="config.name + '-textarea'"
                   [required]="false"
                   [formControlName]="'textarea'"
      ></sam-text-area>

      <sam-button *ngIf="!isEditing && yearOptions && yearOptions.length > 0" [buttonText]="'Add ' + config.itemName" (onClick)="displayForm()" [buttonType]="'default'"></sam-button>
      <sam-button *ngIf="isEditing" buttonText="Cancel" (onClick)="resetForm()" [buttonType]="'default'"></sam-button>
      <sam-button *ngIf="isEditing" buttonText="Confirm" (onClick)="addEntry()" [buttonType]="(!fyTableGroup.valid ? 'disabled' : 'default')"></sam-button>
    </div>
  </div>

</sam-label-wrapper>
