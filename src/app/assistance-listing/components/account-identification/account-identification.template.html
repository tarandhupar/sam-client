<labelWrapper #accountIdentificationLabel
              [name]="name"
              [label]="label"
              [hint]="hint"
              [required]="required">

  <form novalidate [formGroup]="accountFormGroup">
    <!-- todo: add styling -->
    <table class="sam-ui table celled" *ngIf="model.accounts && model.accounts.length > 0">
      <thead>
        <tr>
          <th scope="col">
            Account Code
          </th>
          <th scope="col">
            Description
          </th>
          <th scope="col">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let account of model.accounts; let i=index">
          <tr>
            <td>{{ account.code }}</td>
            <!--todo: wrap account description if it is long-->
            <td>{{ account.description }}</td>
            <td>
              <!--todo: handle this with css classes?-->
              <ng-container *ngIf="currentIndex === model.accounts.length && !showForm">
                <a class="fal-table-edit" (click)="editAccount(i)">Edit</a>
                <i class="fa fa-pencil fal-table-edit" aria-hidden="true" (click)="editAccount(i)"></i>
                <a class="fal-table-delete" (click)="removeAccount(i)">Delete</a>
                <i class="fa fa-trash fal-table-delete" aria-hidden="true" (click)="removeAccount(i)"></i>
              </ng-container>
              <ng-container *ngIf="currentIndex < model.accounts.length || showForm">
                <span class="fal-table-edit disabled">Edit</span>
                <i class="fa fa-pencil fal-table-edit disabled" aria-hidden="true"></i>
                <span class="fal-table-delete disabled">Delete</span>
                <i class="fa fa-trash fal-table-delete disabled" aria-hidden="true"></i>
              </ng-container>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>

    <div [hidden]="!showForm">
      <labelWrapper #codeLabel
                    [name]="codeLabelName"
                    [label]="'Code'"
                    [hint]="codeHint"
                    [required]="true">

        <div class="usa-grid-full">
          <div class="usa-width-one-whole" [formGroup]="codeFormGroup">
            <ng-container *ngFor="let length of codeBoxLengths; let i = index; let isLast = last">
              <!-- todo: don't hardcode maxwidth -->
              <samText class="code-box"
                       [name]="'code-box-' + i"
                       [maxlength]="length"
                       [style.maxWidth]="0.9*length + 2.8 + 'rem'"
                       [formControlName]="'codeBox' + i"
                       (keyup)="onKeyup($event)"
              ></samText>
              <span class="code-separator" *ngIf="!isLast">-</span>
            </ng-container>
          </div>
        </div>

      </labelWrapper>

      <samTextArea [name]="textareaName"
                   [placeholder]="textareaPlaceholder"
                   [disabled]="textareaDisabled"
                   [hidden]="textareaHidden"
                   [formControl]="textareaControl"
      ></samTextArea>
    </div>

    <samButton *ngIf="!showForm" buttonText="Add New Account" (onClick)="displayForm()" [buttonType]="'default'"></samButton>
    <samButton *ngIf="showForm" buttonText="Cancel" (onClick)="resetForm()" [buttonType]="'default'"></samButton>
    <samButton *ngIf="showForm" buttonText="Confirm" (onClick)="addAccount()" [buttonType]="(!codeFormGroup.valid ? 'disabled' : 'default')"></samButton>
  </form>

</labelWrapper>
