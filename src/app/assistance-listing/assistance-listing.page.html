<!--Delete Modal-->
<sam-modal #deleteModal
           [showClose]="true"
           [closeOnOutsideClick]="true"
           [closeOnEscape]="true"
           [type]="'warning'"
           [title]="modalConfig.title"
           [description]="modalConfig.description"
           [submitButtonLabel]="'Ok'"
           [cancelButtonLabel]="'Cancel'"
           (onSubmit)="onDeleteModalSubmit()">
</sam-modal>
<div class="usa-grid assistance-listing-page" *ngIf="program">

  <!--Sidebar-->
  <aside class="usa-width-one-fourth">
    <div>&nbsp;</div>
    <div sam-sticky limit=1200 container="assistance-listing-page">
      <!--Logo-->
      <ng-container *ngIf="program && (errorOrganization || logoUrl===null || errorLogo)">
        <img src="src/assets/img/logo-not-available.png" class="sidenav-logo" alt="Logo Not Available" width="160px" height="160px">
      </ng-container>
      <ng-container *ngIf="program && logoUrl && !errorOrganization">
        <img class="sidenav-logo" id="program-logo" [src]="logoUrl" [alt]="logoInfo" [title]="logoInfo" width="160px" height="160px">
      </ng-container>
      <!--Side Navigation-->
      <sam-feedback-sidenav class="m_T-3x" *ngIf="sidenavModel" (data)="selectedItem($event)" [model]="sidenavModel" (path)="sidenavPathEvtHandler($event)"></sam-feedback-sidenav>
    </div>
  </aside>

  <!--Edit Modal-->
  <sam-modal #editModal
            [showClose]="true"
            [closeOnOutsideClick]="true"
            [closeOnEscape]="true"
            [type]="'info'"
            [title]="'Revise -  Assistance Listing'"
            [description]="'A draft revision for this published program will be utilized for editing. Please click ok to edit a draft of this AL.'"
            [submitButtonLabel]="'Ok'"
            [cancelButtonLabel]="'Cancel'"
            (onSubmit)="onEditModalSubmit($event)">
  </sam-modal>

  <!--Main Content-->
  <div *ngIf="program" class="usa-width-three-fourths">

    <!-- Alerts -->
    <ng-container *ngIf="alerts && alerts.length > 0">
      <div *ngFor="let alert of alerts; let i = index">
        <sam-alert [attr.id]="'program-alert-' + i" labelname="alerts[i].labelname" [type]="alerts[i].config.type" [title]="alerts[i].config.title" [description]="alerts[i].config.description">
          <ng-container *ngIf="alert.labelname === 'published-fal-alert'">
            <ng-container *ngIf="program._links && (program._links['program:revise'] || program._links['program:update'])">
              Click <a class="fal-table-edit" (click)="onEditClick(['#header-information'])">here</a> to edit a draft of the Assistance Listing.
            </ng-container>
          </ng-container>
        </sam-alert>
      </div>
    </ng-container>

    <!-- Intro Content -->
    <section id="program-information">

      <div class="sam-ui hidden divider"></div>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h1 class="sam-ui header">
            <span class="field" id="program-title">{{program?.data?.title}}</span>
          </h1>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#header-information'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
          <a class="fal-table-edit" *ngIf="canDelete()" (click)="onDeleteClick()">
            Delete
            <i class="fa fa-trash fal-delete" aria-hidden="true"></i>
          </a>
        </div>
      </div>


      <div class="sam-ui padded raised segment">

				<div class="sam-ui top right attached mini label">
					Assistance Listing
				</div>

				<div class="sam-ui attached grid">
					<div class="column">
            <div class="sam-ui divided list">

              <div *ngIf="errorOrganization" class="item">
								<div class="content">
									<div class="header">
										Organization ID: {{program.data.organizationId}}
									</div>
									<div class="description">
                    <strong>NOTE:</strong>
                     Complete Federal Hierarchy information is currently unavailable.
									</div>
								</div>
							</div>

							<div *ngIf="program.data?.alternativeNames && program.data?.alternativeNames[0] != null" id="program-alternative-names" class="item">
								<div class="content">
									<div class="header">
										Popular Name
									</div>
									<div class="description">
										{{program.data.alternativeNames[0]}}
									</div>
								</div>
							</div>

              <div *ngIf="federalHierarchy" id="program-fh-information" class="item">
								<div class="content">
									<div class="header">
										{{federalHierarchy.type}}
									</div>
									<div class="description">
                    {{ federalHierarchy.name || federalHierarchy.agencyName }}
									</div>
								</div>
							</div>

              <div id="program-number" class="item">
								<div class="content">
									<div class="header">
										CFDA Number
									</div>
									<div class="description">
                    {{program.data?.programNumber}}
									</div>
								</div>
							</div>

              <div id="program-number" class="item">
								<div class="content">
									<div class="header">
										Related Federal Assistance
									</div>
									<div class="description">
                    <ng-container *ngIf="relatedProgram && program.data?.relatedPrograms?.length > 0 && relatedProgram.length > 0">
                      <ng-container *ngFor="let item of relatedProgram; let isLast = last; let i = index">
                        <a [attr.id]="'program-related-' + i"  [routerLink]="['/programs', item.id,'view']" [queryParams]="qParams" (click)="toTheTop()" >
                          {{item.programNumber}}
                        </a>{{isLast ? '' : ', '}}
                      </ng-container>
                    </ng-container>
                    <span id="program-related-na" *ngIf="program.data?.relatedPrograms?.length == 0 || relatedProgram.length == 0">
                      Not Applicable.
                    </span>
									</div>
								</div>
							</div>

              <div class="item">
                <a target="_blank" class="field" id="'grants-dot-gov-link" *ngIf="program.data?.programNumber" href="https://www.grants.gov/search-grants.html?cfda={{program.data?.programNumber}}">
                  View available opportunities on Grants.gov related to this Assistance Listing
                </a>
              </div>

						</div>
          </div>
        </div>

      </div>

      <div class="sam-ui hidden divider"></div>

    </section>

    <!-- Overview -->
    <section id="program-overview">

      <a name="#/programs/{{programID}}/view#overview"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="overview">Overview</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#overview'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <!-- Objectives -->
      <h3 class="sam-ui dividing header">Objectives</h3>

      <p class="field" id="program-objective">
        {{program.data?.objective}}
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Examples of Funded Projects -->
      <h3 class="sam-ui dividing header">Examples of Funded Projects</h3>

      <div class="content-block" [ngSwitch]="program.data?.projects?.isApplicable">
        <ng-container *ngSwitchCase="true">
          <ng-container *ngFor="let item of program.data?.projects?.list; let i = index">
            <p class="field" [attr.id]="'program-project-example-' + i" *ngIf="item?.description && item.fiscalYear >= getCurrentFY() - 1 && item.fiscalYear <= getCurrentFY() + 1">
              <strong>Fiscal Year {{item.fiscalYear}}:</strong> {{item.description}}
            </p>
          </ng-container>
        </ng-container>

        <p class="field" id="program-project-example-na" *ngSwitchDefault>
          Not Applicable
        </p>
      </div>

      <ng-container *ngIf="program.data?.description && program.data?.description != ''">
        <h3 class="sam-ui header">Assistance Listing Description</h3>
        <div class="content-block">
          {{ program.data?.description }}
        </div>
      </ng-container>

      <div class="sam-ui hidden section divider"></div>

    </section>

    <!-- Authorizations -->
    <section id="program-authorizations">
      <a name="#/programs/{{programID}}/view#authorizations"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="authorizations">Authorizations</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#authorization'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <div *ngFor="let item of authorizationIdsGrouped; let i = index">
        <p class="field" [attr.id]="'program-authorization-' + i">{{ item | authorization }}</p>
      </div>

      <p *ngIf="program.data?.authorizations?.description && program.data?.authorizations?.description != ''">
        {{ program.data?.authorizations?.description }}
      </p>

      <div class="sam-ui hidden section divider"></div>

    </section>

    <!--Financials-->
    <section id="program-financials">
      <a name="#/programs/{{programID}}/view#financial-information"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="financial-information">Financial Information</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#financial-information-obligations'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>
      <em>These funding amounts do not reflect the award amounts that are displayed on USASpending.gov</em>

      <!-- Chart & Table -->
      <financial-obligation-chart *ngIf='dictionaries && program.data?.financial?.obligations' [financialData]='program.data?.financial?.obligations' [dictionaries]='dictionaries'></financial-obligation-chart>

      <div class="sam-ui hidden divider"></div>

      <!-- Range and Average of Financial Assistance -->
      <h3 class="sam-ui dividing header">Range and Average of Financial Assistance</h3>

      <p class="field" id="program-financial-additional-info" *ngIf="(program.data?.financial?.description) && (program.data?.financial?.description != '')">
        {{program.data.financial?.description}}
      </p>

      <p class="field" id="program-financial-additional-info" *ngIf="!(program.data?.financial?.description) || (program.data?.financial?.description == '')">
        No Data Available.
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Accomplishments -->
      <h3 class="sam-ui dividing header">Accomplishments</h3>

      <div class="content-block" [ngSwitch]="program.data?.financial?.accomplishments?.isApplicable">
        <ng-container *ngSwitchCase="true">
          <ng-container *ngFor="let item of program.data?.financial?.accomplishments?.list; let i = index">
            <p class="field" [attr.id]="'program-accomplishments-' + i" *ngIf="item.description && item.description != '' && item.fiscalYear >= getCurrentFY() - 1 && item.fiscalYear <= getCurrentFY() + 1">
              <strong>Fiscal Year {{item.fiscalYear}}:</strong> {{item.description}}
            </p>
          </ng-container>
        </ng-container>

        <p *ngSwitchDefault>Not Applicable.</p>

      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Account Identification -->
      <h3 class="sam-ui dividing header">Account Identification</h3>

      <p *ngFor="let account of program.data?.financial?.accounts; let i = index">
        <span class="field" [attr.id]="'program-account-identification-' + i" *ngIf="account.description">
          {{account.code}}-{{account.description}}
        </span>
        <span class="field" [attr.id]="'program-account-identification-' + i" *ngIf="!account.description">
          {{account.code}}
        </span>
      </p>

      <div class="sam-ui hidden section divider"></div>
    </section>

    <!--Should I apply?-->
    <section id="program-application-criteria">

      <a name="#/programs/{{programID}}/view#criteria-for-applying"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="criteria-for-applying">
            Criteria for Applying
          </h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#criteria-information'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Types of Assistance -->
      <h3 class="sam-ui dividing header">Types of Assistance</h3>

      <p *ngIf="dictionaries && dictionaries.assistance_type && assistanceTypes">
        <ng-container *ngFor="let item of assistanceTypes | filterMultiArrayObject:dictionaries.assistance_type:'element_id':true:'elements'; let isLast = last; let i = index">
          <span class="field" [attr.id]="'program-assistance-type-' + i">
            {{ item.displayValue }}{{isLast ? '' : ', '}}
          </span>
        </ng-container>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Credentials and Documentation -->
      <h3 class="sam-ui dividing header">Credentials and Documentation</h3>

      <p>
        <ng-container *ngIf="program.data?.eligibility?.documentation?.description">
          <span class="field" id="program-elegibility-documentation">
            {{program.data.eligibility?.documentation?.description}}
          </span>

          <ng-container *ngIf="program.data.compliance?.CFR200Requirements?.questions">
            <ng-container *ngFor="let item of program.data.compliance?.CFR200Requirements?.questions">
              <!-- OMBCircularA87 is subpartC-->
              <ng-container *ngIf="item.code === 'subpartC'">
                <span *ngIf="item.isSelected == true" class="field" id="program-elegibility-question-a87">
                  2 CFR 200, Subpart E - Cost Principles applies to this program.
                </span>
                <!-- flag can be both 'no' or null -->
                <span *ngIf="item.isSelected == false" class="field" id="program-elegibility-question-a87">
                  This program is excluded from coverage under 2 CFR 200, Subpart E - Cost Principles.
                </span>
              </ng-container>
            </ng-container>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="!program.data?.eligibility?.documentation?.description">None</ng-container>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Applicant Eligibility -->
      <h3 class="sam-ui dividing header">Applicant Eligibility</h3>

      <div class="sam-ui lightest blue segment designation" *ngIf="program.data && dictionaries && dictionaries.applicant_types">
        <h4 class="sam-ui header">Designations</h4>
        <ng-container *ngFor="let item of program.data?.eligibility?.applicant?.types | filterMultiArrayObject:dictionaries.applicant_types:'element_id':false:''; let isLast = last; let i = index">
          <span class="field" [attr.id]="'program-applicant-designation-' + i">
            {{ item.value }}{{isLast ? '' : ', '}}
          </span>
        </ng-container>
      </div>

      <p>
        <span class="field" id="program-applicant-eligibility">
          {{program.data?.eligibility?.applicant?.description}}
        </span>
      </p>


      <div class="sam-ui hidden divider"></div>

      <!-- Beneficiary Eligibility -->
      <h3 class="sam-ui dividing header">Beneficiary Eligibility</h3>

      <div class="sam-ui lightest blue segment designation" *ngIf="program.data && dictionaries && dictionaries.beneficiary_types">
        <h4>Designations</h4>
        <ng-container *ngFor="let item of program.data?.eligibility?.beneficiary?.types | filterMultiArrayObject:dictionaries.beneficiary_types:'element_id':false:''; let isLast = last; let i = index">
          <span class="field" [attr.id]="'program-beneficiary-designation-' + i">{{ item.value }}{{isLast ? '' : ', '}}</span>
        </ng-container>
        <span class="field" *ngIf="program.data?.eligibility?.beneficiary?.isSameAsApplicant==true" [attr.id]="'program-beneficiary-designation-sameasapplicant'">Beneficiary eligibility is the same as applicant eligibility.</span>
      </div>

      <p>
        <span class="field" id="program-beneficiary-eligibility">{{program.data?.eligibility?.beneficiary?.description}}</span>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Length and Time Phasing of Assistance -->
      <h3 class="sam-ui dividing header">Length and Time Phasing of Assistance</h3>
      <p>
        <span class="field" id="program-assistance-lengthtime">{{program.data?.eligibility?.limitation?.description}}</span>
        <span class="field" id="program-assistance-method" *ngIf="program.data?.eligibility?.limitation?.awarded">
          Method of awarding/releasing assistance: {{program.data.eligibility?.limitation?.awarded}}
        </span>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Use of Assistance -->
      <h3 class="sam-ui dividing header">Use of Assistance</h3>

      <div class="sam-ui lightest blue segment designation" *ngIf="program.data && dictionaries && dictionaries.assistance_usage_types">
        <h4>Designations</h4>
        <ng-container *ngFor="let item of program.data?.eligibility?.assistanceUsage?.types | filterMultiArrayObject:dictionaries.assistance_usage_types:'element_id':false:''; let isLast = last; let i = index">
          <span class="field" [attr.id]="'program-usage-designation-' + i">{{ item.value }}{{isLast ? '' : ', '}}</span>
        </ng-container>
      </div>

      <p>
        <span class="field" id="program-usage-assistance-usage" *ngIf="program.data?.eligibility?.assistanceUsage?.description">{{ program.data?.eligibility?.assistanceUsage?.description }}</span>
        <span class="field" id="program-usage-rules" *ngIf="program.data?.eligibility?.usage?.rules?.description">{{ program.data?.eligibility?.usage?.rules?.description }}</span>
        <span class="field" id="program-usage-restrictions" *ngIf="program.data.eligibility?.usage?.restrictions?.description">{{ program.data.eligibility?.usage?.restrictions?.description }}</span>
        <span class="field" id="program-usage-discretionary-fund" *ngIf="program.data.eligibility?.usage?.discretionaryFund?.description">{{ program.data.eligibility?.usage?.discretionaryFund?.description }}</span>
        <span class="field" id="program-usage-loan-terms" *ngIf="program.data.eligibility?.usage?.loanTerms?.description">{{ program.data.eligibility?.usage?.loanTerms?.description }}</span>
      </p>

      <div class="sam-ui hidden section divider"></div>

    </section>

    <!--How do I apply?-->
    <section id="program-application-information">

      <a name="#/programs/{{programID}}/view#applying-for-assistance"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="applying-for-assistance">Applying for Assistance</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#applying-for-assistance'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Deadlines -->
      <h3 class="sam-ui dividing header">Deadlines</h3>

      <div class="content-block" [ngSwitch]="program.data?.assistance?.deadlines?.flag">
        <ng-container *ngSwitchCase="'yes'">
          <!-- repeat over all deadlines. -->
          <span *ngFor="let deadline of program.data?.assistance?.deadlines?.list; let i = index">
            <span class="field" [attr.id]="'program-deadline-dates-' + i">
              <ng-container *ngIf="deadline.start">{{deadline.start | dateFormat: 'MMM DD, YYYY'}}</ng-container>
              <ng-container *ngIf="deadline.start && deadline.end"> to </ng-container>
              <ng-container *ngIf="deadline.end">{{deadline.end | dateFormat: 'MMM DD, YYYY'}}</ng-container>
              {{deadline.description}}
            </span>
            <!--<span class="field" [attr.id]="'program-deadline-description-' + i">{{deadline.description}}</span>-->
          </span>
        </ng-container>

        <p id="program-deadline-contact" *ngSwitchCase="'contact'">
          Contact the headquarters or regional office, as appropriate for application deadlines
        </p>

        <p id="program-deadline-na" *ngSwitchDefault>
          Not Applicable.
        </p>

        <p>
          {{program.data?.assistance?.deadlines?.description}}
        </p>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Preapplication Coordination -->
      <h3 class="sam-ui dividing header">Preapplication Coordination</h3>

      <ng-container [ngSwitch]="([true] | filterMultiArrayObject:program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports:'isSelected':false:null).length > 0">
        <p *ngSwitchCase="true">

          Preapplication coordination is required.

          <!-- Environmental statements-->
          <ng-container *ngIf="program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports?.length > 0">
            <ng-container *ngFor="let entry of program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports; let i = index">
              <span class="field" [attr.id]="'program-preapplication-coordination-environmental-report-' + i" *ngIf="entry.isSelected == true && entry.reportCode !== 'ExecutiveOrder12372'">
                An environmental impact {{entry.reportCode}} is required for this program.
              </span>
            </ng-container>

            <span *ngIf="program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports?.length==0" class="field" id="program-preapplication-coorindation-environmental-na">
              Environmental impact information is not required for this program.
            </span>


          </ng-container>

          <!-- Executive Order  -->
          <ng-container *ngIf="program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports?.length > 0">
            <ng-container *ngFor="let entry of program.data.assistance?.preApplicationCoordination?.environmentalImpact?.reports; let i = index">
              <ng-container *ngIf="entry.reportCode === 'ExecutiveOrder12372'">
                <span *ngIf="entry.isSelected == true" class="field" id="program-preapplication-coordination-executive-order">
                  This program is eligible for coverage under E.O. 12372, "Intergovernmental Review of Federal Programs."
                  An applicant should consult the office or official designated as the single point of contact in his or her State for more
                  information on the process the State requires to be followed in applying for assistance, if the State has selected the program for review.
                </span>

                <span *ngIf="entry.isSelected == false" class="field" id="program-preapplication-coordination-executive-order">
                  This program is excluded from coverage under E.O. 12372.
                </span>
              </ng-container>
            </ng-container>
          </ng-container>

          <!-- additional content-->
          <span class="field" id="program-preapplication-coordination">
            {{program.data.assistance?.preApplicationCoordination?.description}}
          </span>
        </p>

        <p class="m-t-0 field" id="program-preapplication-coordination" *ngSwitchDefault>
          Preapplication coordination is not applicable.
        </p>
      </ng-container>

      <div class="sam-ui hidden divider"></div>

      <!-- Application Procedures -->
      <h3 class="sam-ui dividing header">Application Procedures</h3>

      <p>
        <ng-container *ngFor="let item of program.data?.compliance?.CFR200Requirements?.questions">
          <ng-container *ngIf="item.code === 'subpartE'">
            <span *ngIf="item.isSelected == true" class="field" id="program-application-procedures-a102">
              2 CFR 200, Uniform Administrative Requirements, Cost Principles, and Audit Requirements for Federal Awards applies to this program.
            </span>

            <span *ngIf="item.isSelected == false" class="field" id="program-application-procedures-a102">
              This program is excluded from coverage under 2 CFR 200, Uniform Administrative Requirements, Cost Principles, and Audit
              Requirements for Federal Awards.
            </span>
          </ng-container>
        </ng-container>

        <!-- additional content-->
        <span class="field" id="program-application-procedures">
      <p *ngIf="program.data?.assistance?.applicationProcedure?.isApplicable">Funding opportunities notices for this listing will be posted on <a href="https://www.grants.gov" target="_blank">Grants.gov</a>.</p>

          <p>{{program.data?.assistance?.applicationProcedure?.description}}</p>
        </span>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Criteria for Selecting Proposals -->
      <h3 class="sam-ui dividing header">Criteria for Selecting Proposals</h3>

      <p>
        <ng-container [ngSwitch]="program.data?.assistance?.selectionCriteria?.isApplicable">
          <p class="field" id="program-selection-criteria" *ngSwitchCase="true">
            {{program.data?.assistance?.selectionCriteria?.description}}
          </p>
          <p class="field" id="program-selection-criteria" *ngSwitchDefault>
            Not Applicable
          </p>
        </ng-container>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Award Procedure -->
      <h3 class="sam-ui dividing header">Award Procedure</h3>

      <p class="field" id="program-award-procedure">
        {{program.data?.assistance?.awardProcedure?.description}}
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Date Range for Approval/Disapproval -->
      <h3 class="sam-ui dividing header">Date Range for Approval/Disapproval</h3>

      <p class="field" id="program-application-approval-interval" [ngSwitch]="program.data?.assistance?.approval?.interval">
        <ng-container *ngSwitchCase="'1'"><em>From 1 to 15 days</em></ng-container>
        <ng-container *ngSwitchCase="'2'"><em>From 15 to 30 days</em></ng-container>
        <ng-container *ngSwitchCase="'3'"><em>From 30 to 60 days</em></ng-container>
        <ng-container *ngSwitchCase="'4'"><em>From 60 to 90 days</em></ng-container>
        <ng-container *ngSwitchCase="'5'"><em>From 90 to 120 days</em></ng-container>
        <ng-container *ngSwitchCase="'6'"><em>From 120 to 180 days</em></ng-container>
        <ng-container *ngSwitchCase="'7'"><em>&gt; 180 Days</em></ng-container>
        <ng-container *ngSwitchCase="'8'"><em>Not Applicable</em></ng-container>
        <ng-container *ngSwitchCase="'9'"><em>Other</em></ng-container>
        <span class="field" id="program-application-approval">
          {{program.data?.assistance?.approval?.description}}
        </span>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Renewals -->
      <h3 class="sam-ui dividing header">Renewals</h3>

      <p class="field" id="program-application-renewal-interval" [ngSwitch]="program.data?.assistance?.renewal?.interval">
        <ng-container *ngSwitchCase="'1'"><em>From 1 to 15 days</em></ng-container>
        <ng-container *ngSwitchCase="'2'"><em>From 15 to 30 days</em></ng-container>
        <ng-container *ngSwitchCase="'3'"><em>From 30 to 60 days</em></ng-container>
        <ng-container *ngSwitchCase="'4'"><em>From 60 to 90 days</em></ng-container>
        <ng-container *ngSwitchCase="'5'"><em>From 90 to 120 days</em></ng-container>
        <ng-container *ngSwitchCase="'6'"><em>From 120 to 180 days</em></ng-container>
        <ng-container *ngSwitchCase="'7'"><em>&gt; 180 Days</em></ng-container>
        <ng-container *ngSwitchCase="'8'"><em>Not Applicable</em></ng-container>
        <ng-container *ngSwitchCase="'9'"><em>Other</em></ng-container>
        <span class="field" id="program-application-renewal">
          {{program.data?.assistance?.renewal?.description}}
        </span>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Appeals -->
      <h3 class="sam-ui dividing header">Appeals</h3>

      <p class="field" id="program-application-appeal-interval" [ngSwitch]="program.data?.assistance?.appeal?.interval">
        <ng-container *ngSwitchCase="'1'"><em>From 1 to 15 days</em></ng-container>
        <ng-container *ngSwitchCase="'2'"><em>From 15 to 30 days</em></ng-container>
        <ng-container *ngSwitchCase="'3'"><em>From 30 to 60 days</em></ng-container>
        <ng-container *ngSwitchCase="'4'"><em>From 60 to 90 days</em></ng-container>
        <ng-container *ngSwitchCase="'5'"><em>From 90 to 120 days</em></ng-container>
        <ng-container *ngSwitchCase="'6'"><em>From 120 to 180 days</em></ng-container>
        <ng-container *ngSwitchCase="'7'"><em>&gt; 180 Days</em></ng-container>
        <ng-container *ngSwitchCase="'8'"><em>Not Applicable</em></ng-container>
        <ng-container *ngSwitchCase="'9'"><em>Other</em></ng-container>
        <span class="field" id="program-application-appeal">
          {{program.data?.assistance?.appeal?.description}}
        </span>
      </p>

      <div class="sam-ui hidden section divider"></div>
    </section>

    <!--Compliance requirements-->
    <section id="program-compliance-requirements">
      <a name="#/programs/{{programID}}/view#compliance-requirements"></a>

      <div class="view-section-margin"></div>
      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="compliance-requirements">Compliance Requirements</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#compliance-requirements'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Policy Requirements -->
      <h3 class="sam-ui dividing header">Policy Requirements</h3>
      <div>
        <span class="field">The following 2CFR policy requirements apply to this assistance listing:</span>
        <ng-container *ngFor="let item of program.data?.compliance?.CFR200Requirements?.questions">
            <p class="field" [attr.id]="'program-policy-requirement-' + item.code">
              <ng-container *ngIf="item.isSelected == true && dictionaries && ([item.code] | filterMultiArrayObject:dictionaries.cfr200_requirements:'element_id':false:null).length > 0">
                {{ ([item.code] | filterMultiArrayObject:dictionaries.cfr200_requirements:'element_id':false:null)[0].value }}
              </ng-container>
            </p>
        </ng-container>
      </div>

      <div>
        <span class="field">The following 2CFR policy requirements are excluded from coverage under this assistance listing:</span>
        <ng-container *ngFor="let item of program.data?.compliance?.CFR200Requirements?.questions">
            <p class="field" [attr.id]="'program-policy-requirement-' + item.code">
              <ng-container *ngIf="item.isSelected == false && dictionaries && ([item.code] | filterMultiArrayObject:dictionaries.cfr200_requirements:'element_id':false:null).length > 0">
                {{ ([item.code] | filterMultiArrayObject:dictionaries.cfr200_requirements:'element_id':false:null)[0].value }}
              </ng-container>
            </p>
        </ng-container>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Reports -->
      <h3 class="sam-ui dividing header">Reports</h3>

      <div>
        <p class="field" id="program-postaward-reports" *ngIf="([true] | filterMultiArrayObject:program.data?.compliance?.reports:'isSelected':false:null).length > 0">
          <ng-container *ngFor="let item of program.data?.compliance?.reports">
            <span *ngIf="item.isSelected == true" class="field" [attr.id]="'program-postaward-reports-' + item.code">{{item.description}}</span>
          </ng-container>
        </p>

        <p class="m-a-0 field" id="program-postaward-reports" *ngIf="([true] | filterMultiArrayObject:program.data?.compliance?.reports:'isSelected':false:null).length == 0">
          Not Applicable
        </p>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Audits -->
      <h3 class="sam-ui dividing header">Audits</h3>

      <div>
        <ng-container [ngSwitch]="program.data?.compliance?.audit?.isApplicable">
          <p *ngSwitchCase="true">
            <ng-container *ngFor="let item of program.data?.compliance?.CFR200Requirements?.questions">
              <ng-container *ngIf="item.code === 'subpartF'">
                <span *ngIf="item.isSelected == true" class="field" id="program-postaward-audit-a133">
                  In accordance with the provisions of 2 CFR 200, Subpart F - Audit Requirements,
                  nonfederal entities that expend financial assistance of $750,000 or more in Federal
                  awards will have a single or a program-specific audit conducted for that year. Non-Federal
                  entities that expend less than $750,000 a year in Federal awards are exempt from Federal
                  audit requirements for that year, except as noted in 2 CFR 200.503
                </span>

                <span *ngIf="item.isSelected == false" class="field" id="program-postaward-audit-a133">
                  This program is excluded from coverage under 2 CFR 200, Subpart F - Audit Requirements.
                </span>
              </ng-container>
            </ng-container>

            <span class="field" id="program-postaward-audit">{{program.data?.compliance?.audit?.description}}</span>
          </p>

          <p class="m-a-0 field" id="program-postaward-audit" *ngSwitchDefault>
            Not Applicable.
          </p>
        </ng-container>
      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Records -->
      <h3 class="sam-ui dividing header">Records</h3>

      <p class="field" id="program-postaward-records" *ngIf="(program.data?.compliance?.records?.description) && (program.data?.compliance?.records.description != '')">
        {{program.data?.compliance?.records?.description}}
      </p>

      <p class="field" id="program-postaward-records" *ngIf="!(program.data?.compliance?.records?.description) || (program.data?.compliance?.records?.description == '')">
        No Data Available.
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Regulations, Guidelines, and Literature -->
      <h3 class="sam-ui dividing header">Regulations, Guidelines, and Literature</h3>

      <p>
        <ng-container [ngSwitch]="program.data?.compliance?.documents?.isApplicable">
          <span class="field" id="program-postaward-documents" *ngSwitchCase="true"> {{program.data?.compliance?.documents?.description}}</span>
          <span class="field" id="program-postaward-documents" *ngSwitchDefault> Not Applicable.</span>
        </ng-container>
      </p>

      <div class="sam-ui hidden divider"></div>

      <!-- Formula and Matching Requirements -->
      <h3 class="sam-ui dividing header">Formula and Matching Requirements</h3>
      <!-- statutory formula-->
      <ng-container [ngSwitch]="program.data?.compliance?.formulaAndMatching?.types?.formula">
        <div class="m-a-0 field" id="program-assistance-formula" *ngSwitchCase="true">
          Statutory Formula: Title {{program.data?.compliance?.formulaAndMatching?.formula?.title}} Chapter {{program.data?.compliance?.formulaAndMatching?.formula?.chapter}}
          Part {{program.data?.compliance?.formulaAndMatching?.formula?.part}} Subpart {{program.data?.compliance?.formulaAndMatching?.formula?.subPart}} Public Law {{program.data?.compliance?.formulaAndMatching?.formula?.publicLaw}}
          {{program.data?.compliance?.formulaAndMatching?.formula?.description}}
        </div>

        <div class="m-a-0 field" id="program-assistance-formula" *ngSwitchCase="false">
          Statuary formula is not applicable to this assistance listing.
        </div>
      </ng-container>

      <!-- matching requirements -->
      <ng-container [ngSwitch]="program.data?.compliance?.formulaAndMatching?.types?.matching">
        <div class="m-a-0 field" id="program-assistance-matching" *ngSwitchCase="true">
            Matching Requirements: <ng-container *ngIf="dictionaries && ([program.data?.compliance?.formulaAndMatching?.matching?.percent] | filterMultiArrayObject:dictionaries.match_percent:'element_id':false:'').length > 0">Percent: {{ ([program.data?.compliance?.formulaAndMatching?.matching?.percent] | filterMultiArrayObject:dictionaries.match_percent:'element_id':false:'')[0].value }}</ng-container>
            {{program.data?.compliance?.formulaAndMatching?.matching?.description}}

          <ng-container [ngSwitch]="program.data?.compliance?.formulaAndMatching?.matching?.requirementFlag">
            <p *ngSwitchCase="'mandatory'">
              Matching requirements are mandatory.
            </p>
            <p *ngSwitchCase="'voluntary'">
              Matching requirements are voluntary.
            </p>
            <p *ngSwitchCase="'voluntary_percent'">
              Matching requirements are voluntary and part of the rating criteria.
            </p>
          </ng-container>
        </div>

        <div class="m-a-0 field" id="program-assistance-matching" *ngSwitchCase="false">
          Matching requirements are not applicable to this assistance listing.
        </div>
      </ng-container>

      <!-- moe-->
      <ng-container [ngSwitch]="program.data?.compliance?.formulaAndMatching?.types?.moe">
        <div class="m-a-0 field" id="program-assistance-moe" *ngSwitchCase="true">
            This program has MOE requirements, see funding agency for further details. Additional Information:
            {{program.data?.compliance?.formulaAndMatching?.moe?.description}}
        </div>

        <div class="m-a-0 field" id="program-assistance-moe" *ngSwitchCase="false">
          MOE requirements are not applicable to this assistance listing.
        </div>
      </ng-container>

      <div class="sam-ui hidden section divider"></div>
    </section>

    <!--Contact information-->
    <section id="program-contact-information">
      <a name="#/programs/{{programID}}/view#contact-information"></a>

      <div class="usa-grid-full">
        <div class="usa-width-two-thirds">
          <h2 class="sam-ui header" id="contact-information">Contact Information</h2>
        </div>
        <div class="usa-width-one-third">
          <a class="fal-table-edit" *ngIf="canEdit()" (click)="onEditClick(['#contact-information'])">
            Edit
            <i class="fa fa-pencil fal-edit" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <h3 class="sam-ui dividing header">Regional or Local Office:</h3>
      <span class="field" id="program-contacts-local" *ngIf="program.data?.contacts?.local?.flag == 'appendix'"> <a [routerLink]="['/search/fal/regionalOffices']" [queryParams]="{ organizationId: federalHierarchy?.orgKey }">See Regional Agency Offices.</a> {{program.data.contacts['local']?.description }}</span>
      <span class="field" id="program-contacts-local" *ngIf="program.data?.contacts?.local?.flag == 'none'"> None. {{program.data.contacts['local']?.description }}</span>

      <h3 class="sam-ui dividing header">Headquarters Office:</h3>

      <div *ngFor="let item of program.data.contacts?.headquarters; let i = index">
        <sam-poc [attr.id]="'program-contacts-poc-' + i" [data]="item"></sam-poc>
      </div>
      <strong>Website: </strong>
      <ng-container *ngIf="!program.data?.website || program.data?.website == null ">No Data Available</ng-container>
      <ng-container *ngIf="program.data?.website">{{program.data.website}}</ng-container>

      <div class="sam-ui hidden section divider"></div>

    </section>

    <!--History Section-->
    <section id="program-history" *ngIf="historicalIndex">
      <a name="#/programs/{{programID}}/view#history"></a>
      <h2 class="sam-ui header" id="history">History</h2>
      <sam-history [data]="history"></sam-history>
    </section>

    <div class="sam-ui hidden section divider"></div>

  </div>

</div>
