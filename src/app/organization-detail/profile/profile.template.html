<div class="usa-width-one-whole organization-profile p_L-5x">
  <div class="usa-width-one-whole" *ngIf="isDataAvailable">
    <div class="org-notification p_T-4x m_B-6x">&nbsp;

      <button *ngIf="isNextLayerCreatable() && selectConfig.options.length > 1" class="usa-button-big pull-right relative">
        Create &nbsp; <i class="fa fa-angle-down"></i>
        <sam-select class="org-type-select"
                   [name]="selectConfig.name"
                   [options]="selectConfig.options"
                   [label]="selectConfig.label"
                   [disabled]="selectConfig.disabled"
                   (modelChange)='onSelect($event)'>
        </sam-select>
      </button>
      <button class="usa-button-big pull-right relative" *ngIf="isNextLayerCreatable() && selectConfig.options.length === 1" (click)="onSelect(selectConfig.options[0].value)">
        Create {{selectConfig.options[0].label}}</button>
    </div>

    <sam-alert class="org-detail-info-alert m_B-6x" (dismiss)="dismissCreateOrgInfoAlert()" [showClose]="true" [type]="'info'" [title]="'Information'" [description]="''" *ngIf="flashMsgService.isMoveOrgSuccess">

      <p>
        {{orgObj.name}} has been moved under {{hierarchyPath[hierarchyPath.length - 2]}}
        <a>Click here</a> to view previous hierarchy for {{orgObj.name}}
      </p>
    </sam-alert>

    <div class="usa-width-one-whole">
      <span *ngFor="let hierarchyName of hierarchyPath; let i = index">
        <a [ngClass]="getLastHierarchyClass(i)" (click)="onChangeOrgDetail(hierarchyName)">{{hierarchyName}}</a>&nbsp; <span *ngIf="!isLastHierarchy(i)"> > </span>
      </span>
    </div>

    <!-- Detail Section-->
    <div class="usa-width-one-whole m_T-4x">
      <h3>{{currentHierarchyType}} Detail
        <button class="usa-button-transparent pull-right m_0 p_T-0" (click)="onEditPageClick()" *ngIf="!isEdit && !isFPDSSource && fhRoleModel.hasPermissionType('PUT',currentHierarchyType)"><i class="fa fa-pencil"></i></button>
        <button class="usa-button-transparent pull-right m_0 p_T-0 " (click)="onCancelEditPageClick()" *ngIf="isEdit"> <i class="fa fa-times"></i></button>
        <button class="usa-button-transparent pull-right m_0 p_T-0" (click)="onSaveEditPageClick()" *ngIf="isEdit"> <i class="fa fa-save"></i></button>
      </h3>
      <div class="usa-width-one-whole m_B-4x">
        <p class="usa-width-one-whole m_L-3x m_B-1x" *ngFor="let pair of orgDetails">
          <span class="usa-width-one-third m_R-0 p_T-2x p_B-1x"><h4>{{pair.description}}:</h4></span>
          <span class="usa-width-two-thirds p_T-2x p_B-1x" *ngIf="(!isEdit || !isEditableField(pair.description)) && pair.description !== 'Description'">{{pair.value}}</span>
          <span class="usa-width-two-thirds p_T-2x p_B-1x" *ngIf="!isEdit  && pair.description === 'Description'">
            <span *ngIf="pair.value.length < 500 || showFullDes">{{pair.value}}<span *ngIf="pair.value.length >= 500 && showFullDes">&nbsp;&nbsp;<a class="org-detail-expand-link" (click)="hideFullDescription()">read less</a></span></span>
            <span *ngIf="pair.value.length >= 500 && !showFullDes">{{pair.value.substr(0,500)}}...<a class="org-detail-expand-link" (click)="showFullDescription()">read more</a></span>
          </span>
          <textarea class="usa-width-two-thirds m_T-2x" rows="4" *ngIf="isEdit && pair.description === 'Description'" [(ngModel)]="editedDescription">{{editedDescription}}</textarea>
          <input class="usa-width-two-thirds org-edit-input" *ngIf="isEdit && pair.description === 'Shortname'" [(ngModel)]="editedShortname">
          <sam-date [label]="''" name='end-date' [value]="editedEndDate" *ngIf="isEdit && pair.description === 'End Date'  && fhRoleModel.hasPermissionType('DELETE',currentHierarchyType)"></sam-date>
          <span class="usa-width-two-thirds p_T-2x p_B-1x" *ngIf="isEdit && pair.description === 'End Date'  && !fhRoleModel.hasPermissionType('DELETE',currentHierarchyType)">{{pair.value}}</span>

        </p>
      </div>
      <h3>{{currentHierarchyType}} Codes</h3>
      <div class="usa-width-one-whole m_B-4x">
        <p class="m_L-3x m_B-1x" *ngFor="let pair of orgCodes">
          <span class="usa-width-one-third m_R-0 p_T-2x p_B-1x"><h4>{{pair.code}}:</h4></span>
          <span class="usa-width-two-thirds p_T-2x p_B-1x">&nbsp;{{pair.value}}</span>
        </p>
      </div>
      <h3 *ngIf="orgAddresses.length > 0">{{currentHierarchyType}} Address</h3>
      <div class="usa-width-one-whole" *ngIf="orgAddresses.length > 0">
        <p class="m_L-3x m_B-1x" *ngFor="let address of orgAddresses">
          <span class="usa-width-one-third m_R-0"><h4>{{address.addressType}}:</h4></span>
          <span class="usa-width-two-thirds">{{address.value.street}}<br>{{address.value.city}}, {{address.value.state}}<br>{{address.value.zip}}</span>
        </p>
      </div>
    </div>
  </div>

  <sam-alert class="org-detail-alert-message" (dismiss)="dismissCreateOrgFlashAlert()" [showClose]="true" [type]="'success'" [title]="'Success'" [description]="'New Office Created - '+ orgObj.name" *ngIf="flashMsgService.isCreateOrgSuccess && flashMsgService.isFlashMsgShow && isDataAvailable" ></sam-alert>
  <sam-alert class="org-detail-alert-message" (dismiss)="dismissEditOrgFlashAlert()" [showClose]="true" [type]="'success'" [title]="'Success'" [description]="'Your edits have been saved'" *ngIf="showEditOrgFlashAlert" ></sam-alert>
  <sam-alert class="org-detail-alert-message" (dismiss)="dismissMoveOrgFlashAlert()" [showClose]="true" [type]="'success'" [title]="'Success'" [description]="orgObj.name+' successfully moved under '+ orgObj.fullParentPath.split('.').pop()" *ngIf="flashMsgService.isMoveOrgSuccess && flashMsgService.isFlashMsgShow && isDataAvailable" ></sam-alert>

</div>
