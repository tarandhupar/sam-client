<form-only class="org-create-page relative" [section]="'FEDERAL HIERARCHY'" [title]="title">
  <div class="usa-width-one-whole relative">
    <span class="create-org-page-hint">{{detailHint}}</span>
    <ng-container [ngSwitch]="section">
      <div class="usa-width-one-whole p_B-6x" *ngSwitchCase="'create'">

        <!--Org Detail Form-->
        <div class="usa-width-one-whole">
          <h2 class="p_T-3x m_B-3x">{{orgTypeMap[orgType.toLowerCase()] + ' Details'}}</h2>
          <form class="usa-width-one-whole create-org-basic-section" [formGroup]="basicInfoForm">
            <sam-label-wrapper class="usa-width-one-whole m_B-2x" [label]="'Sub-Tier Name'" [name]="'Sub Tier Name'" *ngIf="!isCreateMode()">
              <span>{{ parentName}}</span>
            </sam-label-wrapper>
            <div class="usa-width-one-whole create-org-border-section">
              <sam-text #orgName [required]='true' [control]="basicInfoForm.get('orgName')" formControlName="orgName" [name]="'orgName-input'"
                [label]="'Please Provide '+orgTypeMap[orgType.toLowerCase()]+' Name'"></sam-text>
            </div>

            <div class="usa-width-one-whole create-org-border-section" *ngIf="orgType!=='department'">
              <sam-label-wrapper class="usa-width-one-whole" [label]="'Parent Department and Sub-Tier'" [name]="'parent org'">
                <span class="org-type-block">Department:&nbsp;</span><span class="sam-ui mini label m_T-2x p_T-1x p_B-1x">{{parentOrg.l1Name | fhTitleCase}}</span><br/>
                <span *ngIf="orgType === 'office'">
                  <span class="org-type-block">Sub-Tier:&nbsp;</span><span class="sam-ui mini label m_T-2x p_T-1x p_B-1x">{{parentOrg.l2Name | fhTitleCase}}</span>
                </span>
              </sam-label-wrapper>
            </div>


            <sam-label-wrapper #orgStartDateWrapper class="usa-width-one-whole create-org-border-section" [label]="'Start Date'" [name]="'start-date'"
              [required]="true">
              <sam-date (valueChange)="setOrgStartDate($event)" [label]="''" name='start-date' [(ngModel)]="startDateInitVal" [ngModelOptions]="{standalone: true}"
                *ngIf="isCreateMode()"></sam-date>
              <span *ngIf="!isCreateMode()">{{startDateInitVal}}</span>
            </sam-label-wrapper>
            <sam-label-wrapper #orgEndDateWrapper class="usa-width-one-whole create-org-border-section" [label]="'End Date'" [name]="'end-date'">
              <sam-date (valueChange)="setOrgEndDate($event)" [label]="''" name='end-date' [(ngModel)]="endDateInitVal" [ngModelOptions]="{standalone: true}"></sam-date>
            </sam-label-wrapper>
            <sam-text-area #orgDescription class="usa-width-one-whole create-org-border-section" [control]="basicInfoForm.get('orgDescription')"
              formControlName="orgDescription" [label]="'Description'" name='description' [placeholder]="'Provide a description for your organization and its function.'"></sam-text-area>
            <sam-text #orgShortName class="usa-width-one-whole create-org-border-section" [control]="basicInfoForm.get('orgShortName')"
              formControlName="orgShortName" [name]="'orgShortName-input'" [label]="'Please Provide Short Name'"></sam-text>
            <div class="usa-width-one-whole create-org-border-section" *ngIf="isAddressNeeded()">
              <sam-label-wrapper class="p_T-3x" [label]="indicateFundRadioConfig.label" [name]="indicateFundRadioConfig.name" [required]="true">
                <sam-radio-button [(model)]="indicateFundRadioModel" [options]="indicateFundRadioConfig.options" [label]="''" [hint]="indicateFundRadioConfig.hint"
                  [name]="indicateFundRadioConfig.name" [errorMessage]="indicateFundRadioConfig.errorMessage">
                </sam-radio-button>
              </sam-label-wrapper>
            </div>
          </form>
        </div>

        <!--Org Codes Form-->
        <div class="usa-width-one-whole">
          <!--Office Codes Form-->
          <form [formGroup]="officeCodesForm" *ngIf="isAddressNeeded()">
            <h2 class="m_T-3x p_T-3x m_B-3x">Office Codes</h2>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgFPDSCode [control]="basicInfoForm.get('FPDSCode')" formControlName="FPDSCode" [name]="'fpds-input'" [label]="'Please Provide FPDS Code'"></sam-text>
          </form>

          <!--Agency, subcommand, majorcommand Codes Form-->
          <form [formGroup]="agencyCodesForm" *ngIf="orgType==='agency' || orgType==='subcommand' || orgType==='majorcommand'">
            <h2 class="m_T-3x p_T-3x m_B-3x">Agency Codes</h2>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgFPDSCode [control]="agencyCodesForm.get('FPDSCode')" formControlName="FPDSCode" [name]="'fpds-input'" [label]="'Please Provide FPDS Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgOMBBureauCode [control]="agencyCodesForm.get('OMBBureauCode')" formControlName="OMBBureauCode" [name]="'omb-input'"
              [label]="'Please Provide OMB Buearu Code'"></sam-text>
          </form>

          <!--Department Codes Form-->
          <form [formGroup]="deptCodesForm" *ngIf="orgType==='department'">
            <h2 class="m_T-3x p_T-3x m_B-3x">Department Codes</h2>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgFPDSCode [control]="deptCodesForm.get('FPDSCode')" formControlName="FPDSCode" [name]="'fpds-input'" [label]="'Please Provide FPDS Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgTAS2Code [control]="deptCodesForm.get('TAS2Code')" formControlName="TAS2Code" [name]="'tas2-input'" [label]="'Please Provide TAS2 Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgTAS3Code [control]="deptCodesForm.get('TAS3Code')" formControlName="TAS3Code" [name]="'tas3-input'" [label]="'Please Provide TAS3 Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgA11Code [control]="deptCodesForm.get('A11Code')" formControlName="A11Code" [name]="'a11-input'" [label]="'Please Provide A11 Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgCFDACode [control]="deptCodesForm.get('CFDACode')" formControlName="CFDACode" [name]="'cfda-input'" [label]="'Please Provide CFDA Code'"></sam-text>
            <sam-text class="usa-width-one-whole create-org-border-section" #orgOMBAgencyCode [control]="deptCodesForm.get('OMBAgencyCode')" formControlName="OMBAgencyCode" [name]="'omb-agency-input'"
              [label]="'Please Provide OMB Agency Code'"></sam-text>
          </form>
        </div>

        <!--Office Address Form-->
        <div class="usa-width-one-whole m_B-4x" *ngIf="isAddressNeeded()">
          <h2 class="m_T-3x p_T-3x m_B-3x">Office Address</h2>
          <div class="usa-width-one-whole create-org-border-section" *ngFor="let orgAddr of orgAddresses">
              <sam-address-form [orgAddrModel]="orgAddr.addrModel" [showAddIcon]="orgAddr.showAddIcon" (onAdditionalAddrRequest)="onAddAddressForm()"
                                (onCancelAdditionalAddrRequest)="onDeleteAddressForm($event)" (onEnableAddIcon)="onEnableAddAddressIcon($event)"></sam-address-form>
          </div>
        </div>

        <sam-button class="m_T-3x pull-right" (onClick)="onReviewFormClick()" [buttonText]="'Confirm'" [buttonType]="'primary'"></sam-button>
        <button class="usa-button-cancel pull-right m_T-3x m_R-4x" (click)="onCancelBtnClick()">Cancel</button>
      </div>
      <div class="usa-width-one-whole p_B-6x" *ngSwitchCase="'review'">
        <div class="usa-width-one-whole org-confirm-body p_T-3x">

          <!--Details for the Organization-->
          <div class="usa-width-one-whole m_B-2x create-org-border-section">
            <h2>{{orgTypeMap[orgType.toLowerCase()]}} Details</h2>
            <div class="usa-width-one-whole m_T-1x m_B-1x confirm-item" *ngFor="let pair of orgInfo">
              <div class="usa-width-one-fourth confirm-description">{{pair.des}}:</div>
              <div class="usa-width-three-fourths confirm-value">
                <ng-container *ngIf="pair.des !== 'Description'; else desValue">{{pair.value}}</ng-container>
                <ng-template #desValue>
                  <span *ngIf="pair.value.length < 500 || showFullDes;else partialDes">{{pair.value}}
                    <span *ngIf="pair.value.length >= 500 && showFullDes">&nbsp;&nbsp;
                      <a class="org-create-expand-link" (click)="hideFullDescription()">read less</a>
                    </span>
                  </span>
                  <ng-template #partialDes>
                    <span>{{pair.value.substr(0,500)}}...<a class="org-create-expand-link" (click)="showFullDescription()">read more</a></span>
                  </ng-template>
                </ng-template>
              </div>
            </div>
          </div>

          <!--Codes for Organization-->
          <div class="usa-width-one-whole m_B-2x create-org-border-section">
            <h2>{{orgTypeMap[orgType.toLowerCase()]}} Codes</h2>
            <div class="usa-width-one-whole m_T-1x m_B-1x" *ngFor="let pair of orgCodeInfo">
              <span class="confirm-description">{{pair.des}}:</span>
              <span class="confirm-value">{{pair.value}}</span>
            </div>

          </div>
          <div class="usa-width-one-whole m_B-2x create-org-border-section" *ngIf="isAddressNeeded()">
            <h2>Office Addresses</h2>
            <div class="m_B-1x" *ngFor="let address of orgAddresses">
              <span class="confirm-description">{{address.addrModel.addrType}}:</span>
              <span class="confirm-value">
                {{address.addrModel.street1}}<br>
                <ng-container *ngIf="address.addrModel.street2.length > 0">{{address.addrModel.street2}}<br></ng-container>
                {{address.addrModel.city}}, {{address.addrModel.state}}&nbsp;{{address.addrModel.zip}}
                <br>{{address.addrModel.country}}
              </span>
            </div>
          </div>

        </div>
        <sam-button class="pull-right" (onClick)="onConfirmFormClick()" [buttonText]="'Submit'" [buttonType]="'primary'"></sam-button>
        <button class="usa-button-cancel pull-right m_R-4x" (click)="onEditFormClick()">Edit</button>
      </div>
    </ng-container>
  </div>
</form-only>
