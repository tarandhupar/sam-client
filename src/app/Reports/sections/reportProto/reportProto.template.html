<div [ngClass]="{'usa-width-one-whole': true, 'usa-width-three-fourths': false}">
  <section class="usa-grid-full">
    <div class="sam-ui hidden divider"></div>
    Back to: <a routerLink="/reports/overviewProto" routerLinkActive="Active">Dynamic Reports</a>
    <br>
    <h2 class="m_T-2x">{{name}}&nbsp;&nbsp;&nbsp;&nbsp;<span *ngIf="name=='IDVs whose Orders are over the Ceiling Amount' ||
      name=='Potential Vendor Anomaly Report' ||
      name=='Unique Vendors Report'" style="color: red">ANOMOLY</span></h2> <span *ngIf="name=='IDVs whose Orders are over the Ceiling Amount'">ANOMOLY</span>
    <sam-accordion [expandIndex]="0" [bordered]="true" #samAccordionValue class="report__prompts">
      <sam-accordion-section headerText="Report Criteria" name="aria-friendly-section-name">
        <form (ngSubmit)="onSubmit()" #reportForm="ngForm">
          
          <div class="display-block">
            
              <sam-date-range *ngIf="usedPrompts.dateRange" 
                              [required]="true"
                              [label]="'Date range correspond to the Date Signed on Procurement Awards'"
                              [(ngModel)]='dateRange' 
                              name='dateRange'>
              </sam-date-range> 
          </div>

          <div class="display-block">
            
            <div class="usa-width-one-half">
              <sam-text *ngIf="usedPrompts.agencyName"
                        [(ngModel)]="agencyName"
                        [name]="'agencyName'"
                        [label]="'Agency Name'">
              </sam-text>
              <sam-agency-picker-v2 *ngIf="usedPrompts.fHierarchy" 
                                    name="agency-picker"
                                    [(ngModel)]="agencyPicker">
              </sam-agency-picker-v2>
            </div>
            <div class="usa-width-one-half report__additionalprompts">
              <sam-text *ngIf="usedPrompts.contractingRegion"
                        [(ngModel)]="contractingRegion"
                        [name]="'contractingRegion'" 
                        [label]="'Contracting Office Region'">
              </sam-text>
              <sam-text *ngIf="usedPrompts.orgId" 
                        [(ngModel)]="orgCode"
                        [name]="'orgCode'" 
                        [label]="'Organization'">
              </sam-text>
              
              <sam-select *ngIf="usedPrompts.includesBases"
                          class="includesBases"
                          [(ngModel)]="includesBases"
                          name="includesBases" 
                          [options] = "basesOptions"
                          [label] = "'Includes'"
                          (switchStatusChange)="includesBasesStatusChange($event)">
              </sam-select>
            </div>

          </div>  

          <div class="display-block report__promptBtns">
            <sam-button [buttonId]="'defaultBtn'" 
                        [buttonText]="'Clear'" 
                        [buttonType]="btnType"
                        (click)="resetParameter()">
            </sam-button>
            <sam-button [buttonId]="'defaultBtn'" 
                        [buttonText]="'Execute'" 
                        [buttonType]="btnType"
                        (click)="reportExecute()">
            </sam-button>
            <sam-button [buttonId]="'defaultBtn'" 
                        [buttonText]="'Export'" 
                        [buttonType]="btnType" 
                        (click)="exportReport()">
            </sam-button>
          </div>
        </form>
      </sam-accordion-section>
    </sam-accordion>
    <br>
    <iframe name="viewport" [src]="url" *ngIf="showReport" class="no-frame" height="800" width="100%"></iframe>
    <br>
    <div class="usa-width-one-whole">
      <sam-alert class="full-width" [type]="'info'"
                 [description]="'DoD report data that are funded by DoD are delayed 90 days for non DoD users.'">
      </sam-alert>
    </div>
    <br><br>
    <sam-accordion >
      <sam-accordion-section  [name]="'Appendix'" [headerText]="'Appendix'" >
        <div *ngIf="data" [id]="id"> <!-- note the added *ngIf -->
          <div *ngIf="id">
            <ul  class="p_L-0x ul-css">
              <li *ngFor="let report of data.development.admin | repfil: id">
                <b>
                  <a href="{{report.name}}"></a>
                </b>
                <ul  class="p_L-0x ul-css">
                  <li *ngFor="let item of report.appendix">
                    <p class="p_L-0x">{{item}}</p>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </sam-accordion-section>
    </sam-accordion>
  </section>
</div>
