<div [ngClass]="{'usa-width-one-whole': true, 'usa-width-three-fourths': false}">
  <section class="usa-grid-full">
    <div class="sam-ui hidden divider"></div>
    Back to: <a routerLink="/reports" routerLinkActive="Active">Dynamic Proto Reports</a>
    <br>
    <h2 class="m_T-2x">{{name}}</h2>
    <sam-accordion [expandIndex]="0" [bordered]="true" #samAccordionValue>

      <sam-accordion-section headerText="Using custom component" name="aria-friendly-section-name">
        <form (ngSubmit)="onSubmit()" #reportForm="ngForm">
          <p class="p_L-0x">Enter prompt answer or enter full URL:</p>
          <div class="display-block">
            <input type="text" name="customText" #customText>
          </div>
          <div class="display-block" style="font-size:12px;font-weight:700;color:blue;">{{url}}</div>
          <div class="usa-width-one-fourth">
            <sam-button [buttonId]="'defaultBtn'" [buttonText]="'Execute'" [buttonType]="btnType" (click)="reportExecuteTest()"></sam-button>
          </div>
        </form>
      </sam-accordion-section>

      <sam-accordion-section headerText="Using common components" name="aria-friendly-section-name">
        <div class="display-block">
          <sam-date-range [(ngModel)]='dateRange' name='dateRange'></sam-date-range>
        </div>
        <sam-agency-picker #agencyPicker name="agency-picker"
                             [label]="'Search Federal Organizations'"
                             (organization)="onOrganizationChange($event)" [(ngModel)]="agencyPickerValue">
        </sam-agency-picker>
        <div class="usa-width-one-fourth">
            <sam-button [buttonId]="'defaultBtn'" [buttonText]="'Execute'" [buttonType]="btnType" (click)="reportExecuteCC()"></sam-button>
          </div>
      </sam-accordion-section>

      <sam-accordion-section headerText="Using custom URL" name="aria-friendly-section-name">
        <form (ngSubmit)="onSubmit()" #urlForm="ngForm">
          <div class="display-block">
            <textarea name="customUrl" #customUrl></textarea>
            <div class="display-block" style="font-size:12px;font-weight:700;color:blue;">{{urlPassed}}</div>
          </div>
          <div class="usa-width-one-forth">
            <sam-button [buttonId]="'defaultBtn'" [buttonText]="'Execute'" [buttonType]="btnType" (click)="reportExecuteUrl()"></sam-button>
          </div>
        </form>
      </sam-accordion-section>

    </sam-accordion>
    <br>
    <iframe name="viewport" [src]="url" *ngIf="showReport" class="no-frame" height="800" width="100%"></iframe>
    <br>
    <div class="usa-width-one-whole">
      <sam-alert class="full-width" [type]="'info'" [description]="'DoD report data that are funded by DoD are delayed 90 days for non DoD users.'">
      </sam-alert>
    </div>
    <br><br>
    <sam-accordion>
      <sam-accordion-section [name]="'Appendix'" [headerText]="'Appendix'">
        <div *ngIf="data" [id]="id">
          <!-- note the added *ngIf -->
          <div *ngIf="id">
            <ul class="p_L-0x ul-css">
              <li *ngFor="let report of data.reports | repfil: id">
                <b>
                  <a href="{{report.name}}"></a>
                </b>
                <ul class="p_L-0x ul-css">
                  <li *ngFor="let item of report.appendix">
                    <p class="p_L-0x">{{item}}</p>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </sam-accordion-section>
    </sam-accordion>
  </section>
</div>
