<div class="usa-grid wage-determination-page">

  <!--Sidebar-->
  <aside class="usa-width-one-fourth">
    <br />
    <br />
    <div sam-sticky limit=1200 container="wage-determination-page">
      <!--Logo-->
      <img src="src/assets/img/logo-not-found.png" class="sidenav-logo" alt="Logo Not Available" width="140px">

      <div class="sam-ui hidden divider"></div>

      <!--Side Navigation-->
      <sam-feedback-sidenav class="m_T-3x" *ngIf="sidenavModel" (data)="selectedItem($event)" [model]="sidenavModel" (path)="sidenavPathEvtHandler($event)"></sam-feedback-sidenav>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="usa-width-three-fourths">

    <section id="wage-determination" *ngIf="wageDetermination">

      <div class="sam-ui hidden divider"></div>

      <div id="wd-watchlist" style="text-align: right;">
          <sam-watch-button [data] = "{domainId: '7', type: (isSCA) ? 'SCA' : 'DBA', recordId: wageDetermination.fullReferenceNumber, title: wageDetermination.fullReferenceNumber}"></sam-watch-button>
      </div>
        <!--div class="usa-grid">
        <div class="usa-width-one-whole">
          <div class="usa-width-one-fourth">
            <sam-watch-button [domainId] = "'WD'" [recordId]="wageDetermination.fullReferenceNumber"></sam-watch-button>
          </div>
        </div>
      </div-->

      <div class="sam-ui hidden divider"></div>
      <!-- Alert -->
      <ng-container *ngIf="revisionMessage == true">
        <sam-alert [type]="'info'" [title]="''">
          Note: There have been revisions to this wage determination. To view the
          most recent version click <a [routerLink]="['/wage-determination', referenceNumber, processedHistory[0].index]">here</a>.
        </sam-alert>
      </ng-container>

      <!-- Page Title: Service Contract Act -->
      <ng-container *ngIf = "isSCA">
        <h1 class="sam-ui header" id="wd-reference-number">
          SCA WD # {{wageDetermination.fullReferenceNumber}}
          <div class="sub header" id="wd-type">
            Service Contract Act
          </div>
          <div class="sub header" id="wd-archived" *ngIf="!wageDetermination.active">
            Archived WDOLs are for informational purposes only
          </div>
        </h1>
      </ng-container>

      <!-- Page Title:  Davis-Bacon Act-->
      <ng-container *ngIf = "!isSCA">
        <h1 class="sam-ui header" id="wd-reference-number">
          DBA WD # {{wageDetermination.fullReferenceNumber}}
          <div class="sub header" id="wd-type">
            Davis-Bacon Act
          </div>
        </h1>
      </ng-container>

      <div class="sam-ui hidden divider"></div>

      <!-- Intro Content -->
			<div class="sam-ui padded raised segment">

        <div *ngIf = "isSCA" class="sam-ui top right attached mini label">
          SCA Wage Determination
        </div>
        <div *ngIf = "!isSCA" class="sam-ui top right attached mini label">
          DBA Wage Determination
        </div>

				<div class="sam-ui attached grid">
          <div class="column">
            <div class="sam-ui relaxed divided list">
              <div *ngIf="revisionNumber" class="item" id="wd-revision-number">
                <div class="content">
                  <div class="header">Revision #</div>
                  <div class="description">{{revisionNumber}}</div>
                </div>
              </div>
              <div class="item" id="wd-services">
                <div class="content">
                  <div class="header">Service(s)</div>
                  <div class="description">{{services}}</div>
                  <div class="description" *ngIf="!services">Standard (Area-Wide) Wage Determination</div>
                </div>
              </div>
              <div *ngIf="constructionTypes" class="item" id="wd-construction-types">
                <div class="content">
                  <div class="header">Construction</div>
                  <div class="description">{{constructionTypes}}</div>
                </div>
              </div>
              <div *ngIf="wageDetermination.publishDate" class="item" id="wd-date">
                <div class="content">
                  <ng-container *ngIf="isSCA">
                    <div class="header" *ngIf="revisionNumber && revisionNumber === '1'">
                      Published Date
                    </div>
                    <div class="header" *ngIf="revisionNumber && revisionNumber !== '1'">
                      Last Revised Date
                    </div>
                  </ng-container>
                  <ng-container *ngIf="!isSCA">
                    <div class="header" *ngIf="revisionNumber && revisionNumber === '0'">
                      Published Date
                    </div>
                    <div class="header" *ngIf="revisionNumber && revisionNumber !== '0'">
                      Last Revised Date
                    </div>
                  </ng-container>
                  <div class="description">
                    {{wageDetermination.publishDate | dateFormat: 'MMM DD, YYYY'}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="sam-ui hidden divider"></div>

      <!-- Services -->
      <ng-container *ngIf = "services">
        <section id="wd-services">
          <h2 class="sam-ui header">Non-Standard Service Description(s)</h2>
          <ng-container *ngFor="let service of servicesArray; let i = index;">
            <div [attr.id]="'wd-service-' + i">
              <div class="sam-ui medium header">
                {{service[0]}}
                <div class="sub header">{{service[1]}}</div>
              </div>
            </div>
            <div class="sam-ui hidden divider"></div>
          </ng-container>
        </section>
      </ng-container>

      <!-- Location -->
      <div *ngIf = "locationDescription" class="sam-ui medium header">
        Location Description
        <div class="sub header">{{locationDescription}}</div>
      </div>

      <!-- State and Counties -->
      <ng-container *ngIf = "locations && locations != null && locations.length > 0">
        <section id="wd-location">
        <h2 class="sam-ui header">States and Counties</h2>
        <ng-container *ngFor="let location of locations; let i = index; let isLast=last">

          <div [attr.id]="'wd-state-' + i">
            <div class="sam-ui medium header">
              State
              <div class="sub header">{{location.stateString}}</div>
            </div>
          </div>

          <div class="sam-ui hidden divider"></div>

          <div [attr.id]="'wd-counties-' + i">
            <div class="sam-ui medium header">
              Counties
              <div class="sub header">{{location.countiesString}}</div>
            </div>
          </div>

          <div class="sam-ui divider" [ngClass]="{'hidden': isLast}"></div>

        </ng-container>
        </section>
      </ng-container>

      <div class="sam-ui hidden section divider"></div>


      <!-- Print Link -->
      <div class="sam-ui two column vertically padded grid" id="wd-print-link" *ngIf="wageDetermination?.document">
        <div class="column">
          <h2 class="sam-ui header">Document</h2>
        </div>
        <div class="column">
          <a target="blank" class="sam-ui right floated mini dark blue button" tabindex="0" [routerLink]="['/wage-determination', referenceNumber, revisionNumber, 'document']">
            <em class="icon fa fa-print" aria-hidden="true"></em>
            Printer Friendly
          </a>
        </div>
      </div>

      <!-- Document -->
      <pre id="wd-document" *ngIf="wageDetermination?.document">
        {{ wageDetermination.document }}
      </pre>

    </section>


    <div class="sam-ui hidden section divider"></div>

    <!-- History -->
    <section id="wd-history" *ngIf="processedHistory">

      <h2 class="sam-ui header">History</h2>

      <sam-history  [data]="processedHistory"
                    [currentId]="wageDetermination.fullReferenceNumber + '/' + wageDetermination.revisionNumber">
      </sam-history>
      <br>
      <sam-button *ngIf="shortProcessedHistory"
                  [buttonId]="'defaultBtnHistory'"
                  [buttonText]="!showingLongHistory ? 'Show More' : 'Show Less'"
                  [buttonType]="btnType"
                  (click)="showHideLongHistory()">
      </sam-button>

      <div class="sam-ui hidden section divider"></div>

    </section>

  </div>

</div>
